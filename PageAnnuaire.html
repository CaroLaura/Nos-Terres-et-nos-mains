<!DOCTYPE html> 
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NT&NM - Annuaire</title>
  
</head>
<body>

  <header>
    <h1>Nos Terres et Nos Mains - 60120</h1>
    <link rel="stylesheet" href="annuaire.css">

  </header>

  <nav>
    <a href="#carte">Carte</a>
    <a href="#événements">événements</a>
    <a href="#annuaire" class="active">annuaire</a>
    <a href="#patrimoine">Patrimoine</a>
    <a href="#le projet">le projet</a>
  </nav>

  <main>
    <section id="annuaire">
      <h2>Annuaire</h2>
        <p>Découvrez les points de ventes de vos producteurs locaux, le patrimoine bâtit de votre région et bien d'autre encore. Viandes, fromage, yaourt, miel, fruits et légumes n'attendent que vous !</p>

	<div id="filtres">
  		<label for="filtre-commune">Commune :</label>
  		<select id="filtre-commune">
    		<option value="">Toutes</option>
  	</select>

  	<label for="filtre-type">Type :</label>
	    <select id="filtre-type">
	    <option value="">Tous</option>
	  </select>
	</div>


        <div id="liste-annuaire"></div>

        <script src="lieux.js"></script>

	<script>
	  const conteneur = document.getElementById('liste-annuaire');
	  const selectCommune = document.getElementById('filtre-commune');
	  const selectType = document.getElementById('filtre-type');

	  // Remplir les menus déroulants avec les communes et types uniques
	  const communes = [...new Set(lieux.map(l => l.Commune).filter(Boolean))].sort();
	  const types = [...new Set(lieux.map(l => l.Type).filter(Boolean))].sort();

	  communes.forEach(commune => {
	    const opt = document.createElement('option');
	    opt.value = commune;
	    opt.textContent = commune;
	    selectCommune.appendChild(opt);
	  });

	  types.forEach(type => {
 	   const opt = document.createElement('option');
 	   opt.value = type;
 	   opt.textContent = type;
 	   selectType.appendChild(opt);
 	 });

 	 // Fonction d'affichage avec filtres appliqués
 	 function afficherLieux() {
 	   conteneur.innerHTML = ''; // Vider l'affichage
 	   const filtreC = selectCommune.value;
 	   const filtreT = selectType.value;

 	   const filtresAppliqués = lieux.filter(lieu =>
  	    (!filtreC || lieu.Commune === filtreC) &&
  	    (!filtreT || lieu.Type === filtreT)
  	  );

 	   filtresAppliqués.forEach(lieu => {
  	    const div = document.createElement('div');
  	    div.className = 'lieu';
  	    div.innerHTML = `
  	      <h2>${lieu.Nom}</h2>
  	      <p><strong>Commune :</strong> ${lieu.Commune}</p>
  	      <p><strong>Type :</strong> ${lieu.Type || "N/A"}</p>
  	      <p><strong>Adresse :</strong> ${lieu.Adresse1 || ""}, ${lieu.CodePostal} ${lieu.Adresse3}</p>
  	      ${lieu.Description ? `<p><strong>Description :</strong> ${lieu.Description}</p>` : ""}
  	      ${lieu.LienPhoto ? `<p><a href="${lieu.LienPhoto}" target="_blank">Lien vers le site ou photo</a></p>` : ""}
  	    `;
  	    conteneur.appendChild(div);
 	   });
 	 }

 	 // Réagir au changement des filtres
  	selectCommune.addEventListener('change', afficherLieux);
  	selectType.addEventListener('change', afficherLieux);

  	// Affichage initial
  	   afficherLieux();
	</script>




    </section>

    <section id="population">
      <a href="mailto:mairie@breteuil.fr" class="button">Contacter</a>
    </section>
  </main>

<footer>
  <section id="contacts">
    <h2>Contacts</h2>
    <p>Pour plus d'informations, contactez la mairie de Breteuil...</p>
    <a href="mailto:mairie@o.fr" class="button">Contacter</a>
  </section>
</footer>

<script>
  window.addEventListener("scroll", function () {
    const header = document.querySelector("header");
    const nav = document.querySelector("nav");
    if (window.scrollY > 50) {
      header.classList.add("shrink");
      nav.classList.add("shrink");
    } else {
      header.classList.remove("shrink");
      nav.classList.remove("shrink");
    }
  });
</script>

</body>
</html>